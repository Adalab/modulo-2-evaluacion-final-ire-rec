"use strict";const userInput=document.querySelector(".js-userInput"),button=document.querySelector(".js-button"),resultsAnimeFav=document.querySelector(".js-resultsAnimeFav"),resultsAnime=document.querySelector(".js-resultsAnime");let animes=[],favorites=[];function handleClickFav(e){console.log(e.currentTarget.id);const t=parseInt(e.currentTarget.id),i=animes.find(e=>e.mal_id===t),n=favorites.findIndex(e=>e.mal_id===t);-1===n?favorites.push(i):favorites.splice(n,1),console.log(favorites),renderAnimes(),renderFavList()}function onLoad(){const e=JSON.parse(localStorage.getItem("data"));console.log(e),e?(favorites=e,renderFavList(favorites)):getDataApi(),onLoad()}function listenerTitles(){const e=document.querySelectorAll(".js-liTitles");for(const t of e)t.addEventListener("click",handleClickFav)}function getDataApi(){const e=userInput.value.toLowerCase();fetch("https://api.jikan.moe/v4/anime?q="+e).then(e=>e.json()).then(e=>{console.log(e.data),animes=e.data,localStorage.setItem("data",JSON.stringify(favorites)),renderAnimes()})}function renderAnimes(){let e="",t="";for(const i of animes){t=-1!==favorites.findIndex(e=>i.mal_id===e.mal_id)?"titleFavorite":"",e+=`<li ><img src ="${i.images.jpg.image_url}" >`,e+=`<h4 class="liTitles js-liTitles ${t}" id="${i.mal_id}">${i.title}</h4> </li>`}resultsAnime.innerHTML=e,listenerTitles()}function renderFavList(){let e="";for(const t of favorites)e+=`<li ><img src ="${t.images.jpg.image_url}" >`,e+=`<h4 class="liTitles js-liTitles" id="${t.mal_id}">${t.title}</h4> </li>`;document.querySelector(".js-resultsAnimeFav").innerHTML=e}function handleClick(e){e.preventDefault(),getDataApi()}button.addEventListener("click",handleClick);